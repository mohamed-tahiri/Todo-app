<div class="space-y-2">
  <!-- Loader -->
  <div *ngIf="loading" class="text-gray-400 text-sm">
    Chargement des tâches…
  </div>

  <!-- Bouton pour afficher le formulaire -->
  <div *ngIf="!showTaskForm" class="text-blue-500 cursor-pointer hover:underline" (click)="toggleTaskForm()">
    ➕ Add task
  </div>

  <!-- Formulaire d'ajout -->
  <div *ngIf="showTaskForm" class="flex gap-2 items-end">
    <input
      class="border rounded px-2 py-1 flex-1"
      [(ngModel)]="newTask.title"
      placeholder="Titre…"
    />
    <select
      class="border rounded px-2 py-1"
      [(ngModel)]="newTask.status"
    >
      <option value="TODO">TODO</option>
      <option value="IN_PROGRESS">IN_PROGRESS</option>
      <option value="DONE">DONE</option>
    </select>
    <button
      (click)="createTask()"
      class="bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700"
    >
      Ajouter
    </button>
    <button
      (click)="toggleTaskForm()"
      class="bg-gray-300 text-gray-800 px-2 py-1 rounded hover:bg-gray-400"
    >
      Annuler
    </button>
  </div>

  <!-- Liste des tâches -->
  <ul class="space-y-2" *ngIf="!loading && tasks.length > 0">
    <li
      *ngFor="let t of tasks"
      class="bg-white border rounded p-2 flex justify-between items-center"
    >
      <div>
        <div class="font-medium">{{ t.title }}</div>
        <div class="text-gray-500 text-xs">{{ t.status }}</div>
      </div>
      <button
        (click)="deleteTask(t.id!)"
        class="text-red-600 hover:text-red-800"
      >
        🗑️
      </button>
    </li>
  </ul>

  <!-- Si aucune tâche -->
  <p *ngIf="!loading && tasks.length === 0" class="text-gray-400 text-sm">
    Aucune tâche pour cette liste.
  </p>
</div>
